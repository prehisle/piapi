providers:
  - name: provider-alpha
    apiKeys:
      main-key: sk-alpha-xxx
      backup-key: sk-alpha-backup
    services:
      - type: codex
        baseUrl: https://api.provider-alpha.com/v1/engines
        auth:
          mode: header
          name: Authorization
          prefix: "Bearer "
      - type: claude_code
        baseUrl: https://api.provider-alpha.com/v1/claude
        auth:
          mode: header
          name: x-api-key
  - name: provider-beta
    apiKeys:
      prod-key: sk-beta-yyy
    services:
      - type: codex
        baseUrl: https://api.provider-beta.com/codex
        auth:
          mode: query
          name: api_key

users:
  - name: Alice
    apiKey: piapi-user-alice
    services:
      codex:
        providerName: provider-alpha
        providerKeyName: main-key
      claude_code:
        providerName: provider-alpha
        providerKeyName: main-key
      # 聚合路由示例（同一服务下多个候选，上线后优先使用此配置格式）
      # codex:
      #   strategy: adaptive_rr   # round_robin / weighted_rr / adaptive_rr / sticky_healthy
      #   candidates:
      #     - providerName: provider-alpha
      #       providerKeyName: main-key
      #       weight: 3
      #       enabled: true
      #     - providerName: provider-beta
      #       providerKeyName: prod-key
      #       weight: 1
      #       enabled: true
  - name: Bob
    apiKey: piapi-user-bob
    services:
      codex:
        providerName: provider-alpha
        providerKeyName: backup-key
  - name: Carol
    apiKey: piapi-user-carol
    services:
      codex:
        providerName: provider-beta
        providerKeyName: prod-key
